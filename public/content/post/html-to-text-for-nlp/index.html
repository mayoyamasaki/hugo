
<!DOCTYPE html>
<html lang="ja">
<head>

  
  <meta charset="UTF-8">
  <title>
    HTML to TEXT for NLP | Mayo&#39;s Blog
  </title>


  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">

  
  <link rel="canonical" href="https://mayoyamasaki.github.io/content/post/html-to-text-for-nlp/"/>

  
  <link rel="stylesheet" href="/css/sanitize.css">
  <link rel="stylesheet" href="/css/responsive.css">
  <link rel="stylesheet" href="/css/highlight_monokai.css">
  <link rel="stylesheet" href="/css/theme.css">
  <link rel="stylesheet" href="/css/custom.css">
  
  
  <link href="https://mayoyamasaki.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Mayo&#39;s Blog" />
  <link href="https://mayoyamasaki.github.io/index.xml" rel="feed" type="application/rss+xml" title="Mayo&#39;s Blog" />

  
  


</head>



<body>
<div class="container">

  
  <header role="banner">
    <div class="row gutters">
      <div id="site-title" class="col span_6">
        <h1><a href="https://mayoyamasaki.github.io/">Mayo&#39;s Blog</a></h1>
        
      </div>
      <div id="social" class="col span_6">
        <ul>
          <li><a href="https://twitter.com/mayoyamasaki" target="_blank">Twitter</a></li>
          
          <li><a href="https://github.com/mayoyamasaki" target="_blank">GitHub</a></li>
          <li><a href="https://mayoyamasaki.github.io/index.xml" type="application/rss+xml" target="_blank">RSS</a></li>
        </ul>
      </div>
    </div>
  </header>


  
  <main id="single" role="main">
    <div class="article-header">
      <h1>HTML to TEXT for NLP</h1>
      <div class="meta">
        Nov 4, 2016 &nbsp;
        
          #<a href="/tags/python">Python</a>&nbsp;
        
          #<a href="/tags/nlp">NLP</a>&nbsp;
        
      </div>
    </div>
    <article>
      

<h2 id="概要">概要</h2>

<p>「HTMLからテキストを取り出す」というタスクは、一見簡単の様で難しい。<br />
特に、後続するテキスト処理(文分割や形態素解析、構文解析)を上手くしようとすると難しい。<br />
ここでは、英語文書に対して、ナイーブなルールで、テキスト抽出をそこそこ上手くやる方法を紹介する。</p>

<h2 id="はじめに">はじめに</h2>

<p>この記事では、Github上で公開している実装の簡単な紹介をする<sup class="footnote-ref" id="fnref:1"><a rel="footnote" href="#fn:1">1</a></sup>。</p>

<p>使い方は、以下のようにコマンドラインツールとして使ったり、</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>python3 html2text.py https://example.com &gt; example.com.txt
</pre></div>

<p>Pythonを通して利用できる。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>$ python3
&gt;&gt;&gt; import html2text
&gt;&gt;&gt; <span style="color: #19177C">html</span> <span style="color: #666666">=</span> html2text.url2html<span style="color: #666666">(</span><span style="color: #BA2121">&#39;https://example.com&#39;</span><span style="color: #666666">)</span>
&gt;&gt;&gt; <span style="color: #19177C">bodyhtml</span> <span style="color: #666666">=</span> html2text.html2body<span style="color: #666666">(</span>html<span style="color: #666666">)</span>
&gt;&gt;&gt; <span style="color: #19177C">text</span> <span style="color: #666666">=</span> html2text.html2text<span style="color: #666666">(</span>bodyhtml<span style="color: #666666">)</span>
</pre></div>

<h2 id="実装">実装</h2>

<h3 id="スペースの統一">スペースの統一</h3>

<p>タブ文字、<a href="https://ja.wikipedia.org/wiki/%E3%83%8E%E3%83%BC%E3%83%96%E3%83%AC%E3%83%BC%E3%82%AF%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9">NBSP</a><code>\xa0</code>等を半角スペースに置換する。
NBSPは、よく構文解析などが例外を吐くので注意。</p>

<h3 id="ブロックタグ削除の影響">ブロックタグ削除の影響</h3>

<p><code>foo.&lt;/p&gt;&lt;p&gt;bar</code>の様なケースでは、単に削除すると、<code>foo.bar</code>となり、TokenizeやSentence segmentationで失敗する原因になる。また<code>foo.&lt;/div&gt;bar</code>の様なケースもあるので、単にブロックタグの連接だけでなく、ブロックタグの直後に空白や改行無しに、文字が連接するかをチェックする必要がある。<br />
ここでは、前者に対しては改行、後者に対してはスペースを挿入することで対処している。</p>

<h3 id="タグ削除による影響">タグ削除による影響</h3>

<p>ブロックタグに限らず、CSSでblockやinline-block等をしていしているインラインタグでも、同種の影響がでる。もっと言えば、HTML</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1"><a href="https://github.com/mayoyamasaki/html2text">https://github.com/mayoyamasaki/html2text</a>
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
</ol>
</div>

      
      
      
    </article>
    
 <aside><div id="disqus_thread"></div></aside>

<script type="text/javascript">
     
    var disqus_shortname = 'mayoyamasaki';

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



  </main>
  
  <nav class="pagination-single">
    
      <span class="previous">&larr; <a href="https://mayoyamasaki.github.io/content/post/team-geak/" rel="prev">Team Geek</a></span>
    
    
      <span class="next"><a href="https://mayoyamasaki.github.io/content/post/a-benchmark-of-scikit-learn-svm/" rel="next">A Benchmark of scikit-learn SVMs</a> &rarr;</span>
    
  </nav>


  
  <footer role="contentinfo">
    <div style="text-align:center;">
      
      Copyright (c) 2016, mayo yamasaki all rights reserved.
    </div>
  </footer>


</div>

<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



</body>
</html>

